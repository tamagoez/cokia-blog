import { Steps } from 'nextra-theme-docs'

# ユーザー認証

## 新規登録
<Steps>

### (S)ワンタイムIDを発行
クライアント側からワンタイムID発行を送信+申請する。

### (B)新規登録ページ
ワンタイムIDを認証出来たら、新規登録ページを表示する。  
ワンタイムID情報から、metaデータにリダイレクト先URLを登録する。  
メールのリダイレクト先は、baseの専用リダイレクト先にワンタイムIDを含ませたもの
  
### (B)メールリダイレクト
ワンタイムIDを認証出来たら、サーバー側にワンタイムIDを送信し、ユーザー情報等もPOSTする。  
POST処理成功後、サーバー側のログインページにリダイレクトする。
  
### (S)サーバー側からの受取
発行したワンタイムIDと照合する。  
認証後、`baseuuid`を登録し、メールアドレスとパスワードも登録する。  
これからは、baseにアクセスしないでログインできる。  
**サーバー側はメール処理を実行しないように**  
baseにも一部ユーザーデータを同期する。

### (B)データ保存
ワンタイムIDを破棄する。

### (S)ワンタイムIDを破棄
同上。
</Steps>
